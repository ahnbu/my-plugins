# 세션 패턴 분석 — 자동화 기회 및 문서규칙 후보

## Context

최근 3일(2026-02-23~25) 107개 세션, 4,772건의 사용자 메시지를 분석하여:
1. **반복 요청 중 자동화 가능한 패턴** 도출
2. **문서작성 규칙으로 공식화할 패턴** 도출

---

## A. 자동화 후보 (빈도순 정렬)

### P0 — 즉시 효과 (빈도 15회+)

| # | 패턴 | 빈도 | 제안 | 유형 |
|---|------|------|------|------|
| 1 | "커밋해줘" / "커밋푸쉬해줘" | ~30회 | **`/cp` 커맨드** — 변경사항 분석 → 커밋메시지 자동생성 → commit+push. `/wrap`의 경량 분기 | command |
| 2 | "답변을 md로 저장해줘" | ~14회 | **`/save` 커맨드** — 직전 응답을 `한글제목_YYYYMMDD.md`로 저장. 저장 경로는 현재 cwd 기본 | command |
| 3 | CHANGELOG 수동 업데이트 | 매 커밋 | **pre-commit hook 확장** — 커밋 메시지 파싱하여 CHANGELOG.md 최상단에 자동 추가 | hook |

### P1 — 단기 (빈도 8~14회)

| # | 패턴 | 빈도 | 제안 | 유형 |
|---|------|------|------|------|
| 4 | 플러그인 캐시 수동 동기화 | ~12회 | **`/sync-plugin` 커맨드** — git push → marketplace git pull → cp -r → diff 검증 일괄 실행 | command |
| 5 | handoff 참조 후 후속 작업 시작 | ~8회 | **`/resume` 커맨드** — handoff 파일을 읽고 "다음 세션 작업" 섹션을 자동 추출·제시 | command |
| 6 | 리서치 → 정리문서 반복 사이클 | ~8회 | **`research-doc` 스킬** — 목적/배경 → 핵심발견 → 비교표 → 결론/권장 구조 자동 생성 | skill |
| 7 | Plan 파일이 영문 랜덤명으로 저장 | 반복 | **CLAUDE.md 규칙** — Plan 확정 시 프로젝트 폴더에 `한글명_YYYYMMDD.md`로 복사 | rule |

### P2 — 중기 (빈도 4~7회)

| # | 패턴 | 빈도 | 제안 | 유형 |
|---|------|------|------|------|
| 8 | Hook 디버깅 긴 사이클 | ~18회 | **`scripts/test-hook.js`** — stdin mock → hook 실행 → 결과 검증. 새 세션 불필요 | script |
| 9 | git init 후 .gitignore 설정 누락 | ~4회 | **PostToolCall hook** — `git init` 감지 시 `.bkit/`, `.env` 등 자동 추가 | hook |
| 10 | README vs 실제 상태 불일치 | 반복 | **`/wrap` 확장** — 세션 종료 시 README 주요 섹션 최신성 경고 | skill확장 |

---

## B. 문서작성 규칙 후보 (CLAUDE.md 또는 스킬로 반영)

### B1. 이미 존재하지만 강화 필요

| 규칙 | 현재 상태 | 강화 방향 |
|------|----------|----------|
| fetch MCP 사용 | CLAUDE.md에 명시 | 서브에이전트 프롬프트 템플릿에 기본 포함 |
| 배포 워크플로우 (dev→marketplace→cache) | CLAUDE.md에 명시 | **직접 캐시 수정 금지** 경고 강조 |
| 범위 초과 수정 금지 | CLAUDE.md에 명시 | 이미 충분. 준수도 문제 |

### B2. 신규 추가 후보

| # | 규칙 | 적용 위치 | 근거 |
|---|------|----------|------|
| 1 | **진단 문서 구조**: 가설 → 테스트계획 → 실행결과 → 해석/결론 테이블 | CLAUDE.md 문서규칙 | 4차까지 반복된 디버깅 문서 패턴 |
| 2 | **리서치 정리 구조**: 목적/배경 → 핵심발견 → 비교표 → 결론/권장사항 | skill (`research-doc`) | 8회+ 반복 |
| 3 | **비교표 포맷**: 이모티콘 + 프로그레스바(`████░░`) | skill (이미 `compare-table` 존재) | 이미 자동화됨 |
| 4 | **Plan 확정 → 프로젝트 저장**: `~/.claude/plans/`의 영문명 → 프로젝트 폴더에 한국어명 복사 | CLAUDE.md | 반복 요청 |
| 5 | **디버깅 가설 표기**: 미검증 가설은 `[미확인]` 태그. 코드/문서로 확인 후에만 사실로 기록 | CLAUDE.md | stdin 공유 오진 사례 |
| 6 | **테스트 문서 네이밍**: `docs/<플러그인명>/진단_<주제>_N차_YYYYMMDD.md` | CLAUDE.md 문서규칙 | 파편화된 테스트 문서명 통일 |

---

## C. 마찰 포인트 요약 (자동화 외)

| 심각도 | 포인트 | 대응 |
|--------|--------|------|
| 높음 | CLAUDE.md 지시 미준수 (fetch MCP, 배포 워크플로우) | 규칙 강화보다는 구조적 해결 (hook, 템플릿) |
| 높음 | 서브에이전트 과도한 지연 (57분) | Claude Code 플랫폼 한계. 경량 작업은 직접 처리 규칙 |
| 중간 | `/wrap`이 무거움 | 이미 리팩토링 결정됨 (handoff + git commit으로 축소) |
| 중간 | EEXIST 버그로 plugin update 불가 | `/sync-plugin` 우회 커맨드로 대응 |

---

## D. 실행 계획

이 분석 결과를 바탕으로 사용자가 선택할 수 있는 액션:

1. **즉시**: P0 항목 중 원하는 것 선택하여 구현
2. **CLAUDE.md 업데이트**: B2 신규 규칙 중 원하는 것 반영
3. **후속 세션**: P1~P2 항목을 개별 세션에서 순차 구현

### 검증 방법
- 새 커맨드/스킬: 개발 레포에서 구현 → push → `/plugin update` (또는 `/sync-plugin`) → 일반 프로젝트에서 E2E 테스트
- CLAUDE.md 규칙: 다음 세션에서 해당 상황 발생 시 준수 여부 확인
